(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e654b98a"],{"0722":function(e,t,n){"use strict";n.r(t);n("4de4"),n("d3b7"),n("ac1f"),n("466d"),n("a4d3"),n("e01a");var c=n("7a23"),a=n("5502"),o=n("b85c"),l=n("1da1"),r=(n("96cf"),n("e9c4"),n("b64b"),n("b0c0"),n("16ee")),u=n("2295"),i=n("c9a1"),d=Object(c["createElementVNode"])("div",{style:{"border-bottom":"#e0e0e0 1px solid",padding:"20px"}},[Object(c["createElementVNode"])("div",{class:"modal-title"},"Cadastrar Atributo")],-1),b={style:{"border-top":"#e0e0e0 1px solid",padding:"20px",display:"flex","justify-content":"space-between"}},s=Object(c["createTextVNode"])("Excluir"),f=Object(c["createTextVNode"])("Cancelar"),p=Object(c["createTextVNode"])("Salvar"),O={style:{display:"flex"}},j={style:{flex:"1","margin-right":"5px"}},m={style:{flex:"1","margin-left":"5px"}},v=Object(c["createElementVNode"])("br",null,null,-1),V={setup:function(e,t){var n=t.expose,V={id:0,description:"",attribute:"",expression:"",type:"string"},x=Object(a["b"])(),h=Object(c["ref"])(null),N=Object(c["ref"])(!1),y=Object(c["ref"])("first"),k=Object(c["ref"])(!1),w=Object(c["ref"])(V),C=Object(c["ref"])(0),g=Object(c["ref"])(""),E=null,B=function(){window.$traccar.attributeTest(C.value,w.value).then((function(e){var t=e.data;g.value=t})).catch((function(e){g.value=e.response.data}))},_=function(){E&&clearInterval(E),0!==C.value&&(E=setTimeout((function(){B()}),1e3))},S=function(){w.value=JSON.parse(JSON.stringify(V)),N.value=!0};function T(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}var A=function(e){w.value=JSON.parse(JSON.stringify(V));for(var t=0,n=Object.keys(V);t<n.length;t++){var c=n[t];w.value[c]="expression"===c?T(e[c]):e[c]}N.value=!0};n({newAttribute:S,editAttribute:A});var L=function(){N.value=!1},U=function(){i["a"].confirm("Deseja realmente excluir este atributo computado?","Tem certeza?").then((function(){x.dispatch("attributes/delete",w.value.id).then((function(){N.value=!1,Object(u["a"])({title:"Info",message:"Atributo computado deletado com suceso.",type:"info"})}))}))},I=function(){Object(u["a"])({title:"Info",message:"Cadastrando seu atributo...",type:"info"});var e=JSON.parse(JSON.stringify(V));Object.assign(e,w.value),x.dispatch("attributes/save",e).then(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var n,c,a,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=h.value.selected,!(n.length>0)){e.next=21;break}c=Object(o["a"])(n),e.prev=3,c.s();case 5:if((a=c.n()).done){e.next=13;break}return l=a.value,console.log(l),Object(u["a"])({title:"Info",message:"Vinculando atributo ao dispositivo "+l.name,type:"info"}),e.next=11,window.$traccar.linkObjects({deviceId:l.id,attributeId:t.id});case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](3),c.e(e.t0);case 18:return e.prev=18,c.f(),e.finish(18);case 21:Object(u["a"])({title:"Successo",message:"Atributo computado cadastrado com sucesso.",type:"success"}),N.value=!1;case 23:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(t){return e.apply(this,arguments)}}())};return function(e,t){var n=Object(c["resolveComponent"])("el-button"),a=Object(c["resolveComponent"])("el-input"),o=Object(c["resolveComponent"])("el-form-item"),l=Object(c["resolveComponent"])("el-option"),u=Object(c["resolveComponent"])("el-select"),i=Object(c["resolveComponent"])("el-switch"),V=Object(c["resolveComponent"])("el-form"),E=Object(c["resolveComponent"])("el-tab-pane"),S=Object(c["resolveComponent"])("el-tabs"),T=Object(c["resolveComponent"])("el-dialog");return Object(c["openBlock"])(),Object(c["createBlock"])(T,{"lock-scroll":!0,modelValue:N.value,"onUpdate:modelValue":t[14]||(t[14]=function(e){return N.value=e}),title:"Teste"},{title:Object(c["withCtx"])((function(){return[d]})),footer:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",b,[Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(n,{type:"danger",onClick:t[0]||(t[0]=function(e){return U()})},{default:Object(c["withCtx"])((function(){return[s]})),_:1})]),Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(n,{type:"danger",plain:"",onClick:t[1]||(t[1]=function(e){return L()})},{default:Object(c["withCtx"])((function(){return[f]})),_:1}),Object(c["createVNode"])(n,{type:"primary",onClick:t[2]||(t[2]=function(e){return I()})},{default:Object(c["withCtx"])((function(){return[p]})),_:1})])])]})),default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(S,{modelValue:y.value,"onUpdate:modelValue":t[13]||(t[13]=function(e){return y.value=e})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(E,{label:"Comando",name:"first"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(V,{"label-width":"120px","label-position":"top"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(o,{label:"Descrição"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(a,{modelValue:w.value.description,"onUpdate:modelValue":t[3]||(t[3]=function(e){return w.value.description=e})},null,8,["modelValue"])]})),_:1}),Object(c["createVNode"])(o,{label:"Atributo"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(a,{modelValue:w.value.attribute,"onUpdate:modelValue":t[4]||(t[4]=function(e){return w.value.attribute=e})},null,8,["modelValue"])]})),_:1}),Object(c["createVNode"])(o,{label:"Tipo de Saída"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(u,{modelValue:w.value.type,"onUpdate:modelValue":t[5]||(t[5]=function(e){return w.value.type=e}),onChange:t[6]||(t[6]=function(e){return B()}),filterable:"",placeholder:"Tipo de Saída",size:"large","no-data-text":"Nenhum tipo disponível"},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:1,label:"Texto",value:"string"})),(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:2,label:"Numérico",value:"number"})),(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:3,label:"Lógico",value:"boolean"}))]})),_:1},8,["modelValue"])]})),_:1}),Object(c["createElementVNode"])("div",O,[Object(c["createElementVNode"])("div",j,[Object(c["createVNode"])(o,{label:"Expressão"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(a,{modelValue:w.value.expression,"onUpdate:modelValue":t[7]||(t[7]=function(e){return w.value.expression=e}),autosize:{minRows:4},type:"textarea",placeholder:"Please input",onKeyup:t[8]||(t[8]=function(e){return _()})},null,8,["modelValue"])]})),_:1})]),Object(c["createElementVNode"])("div",m,[Object(c["createVNode"])(o,{label:"Testar Atributo em"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(u,{modelValue:C.value,"onUpdate:modelValue":t[9]||(t[9]=function(e){return C.value=e}),onChange:t[10]||(t[10]=function(e){return B()}),"value-key":"id",filterable:"",placeholder:"Grupo",size:"large","no-data-text":"Nenhum tipo disponível"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(l,{label:"Não Testar",value:0}),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object(c["unref"])(x).state.devices.deviceList,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(c["createVNode"])(o,{label:"Resultado"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(a,{disabled:"",modelValue:g.value,"onUpdate:modelValue":t[11]||(t[11]=function(e){return g.value=e}),autosize:{minRows:4},type:"textarea",placeholder:"Please input"},null,8,["modelValue"])]})),_:1})])]),v,Object(c["createVNode"])(i,{modelValue:k.value,"onUpdate:modelValue":t[12]||(t[12]=function(e){return k.value=e}),"active-text":"Aplicar este atributo aos meus favoritos"},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(c["createVNode"])(E,{label:"Dispositivos",name:e.devices},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(Object(c["unref"])(r["a"]),{ref_key:"deviceList",ref:h},null,512)]})),_:1},8,["name"])]})),_:1},8,["modelValue"])]})),_:1},8,["modelValue"])}}};n("8dbf");const x=V;var h=x,N=function(e){return Object(c["pushScopeId"])("data-v-194e0364"),e=e(),Object(c["popScopeId"])(),e},y={style:{display:"flex","justify-content":"space-between","align-content":"space-between"}},k=N((function(){return Object(c["createElementVNode"])("div",{style:{width:"30%"}},null,-1)})),w=N((function(){return Object(c["createElementVNode"])("i",{class:"fas fa-plus"},null,-1)})),C={style:{border:"silver 1px solid","border-radius":"5px","margin-top":"20px",height:"calc(100vh - 200px)"}},g=N((function(){return Object(c["createElementVNode"])("div",{class:"deviceHead"},[Object(c["createElementVNode"])("div",{class:"name",style:{"font-size":"12px","font-weight":"100",padding:"5px",width:"calc(60% + 3.5px)"}},"Titulo"),Object(c["createElementVNode"])("div",{class:"name",style:{"font-size":"12px","font-weight":"100",padding:"5px",flex:"2"}},"Tipo")],-1)})),E={style:{"overflow-x":"hidden","overflow-y":"scroll",height:"calc(100vh - 230px)"}},B=["onClick"],_={class:"name"},S={class:"name",style:{flex:"2"}},T={class:"name"},A={class:"name",style:{flex:"2"}},L={setup:function(e){var t=Object(a["b"])(),n=Object(c["ref"])(""),o=Object(c["ref"])(null),l=Object(c["computed"])((function(){return""===n.value?t.state.attributes.attributesList:t.state.attributes.attributesList.filter((function(e){return e.description.toLowerCase().match(n.value.toLowerCase())}))}));return function(e,a){var r=Object(c["resolveComponent"])("el-input"),u=Object(c["resolveComponent"])("el-button"),i=Object(c["resolveComponent"])("el-tooltip");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(Object(c["unref"])(h),{ref_key:"editAttributeRef",ref:o},null,512),Object(c["createElementVNode"])("div",y,[k,Object(c["createVNode"])(r,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=function(e){return n.value=e}),placeholder:"Buscar Atributo",style:{"--el-input-border-radius":"5px","margin-right":"5px"}},null,8,["modelValue"]),Object(c["unref"])(t).getters.advancedPermissions(65)?(Object(c["openBlock"])(),Object(c["createBlock"])(i,{key:0,effect:"dark",content:"Cadastrar Atributo",placement:"bottom"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(u,{type:"primary",onClick:a[1]||(a[1]=function(e){return o.value.newAttribute()})},{default:Object(c["withCtx"])((function(){return[w]})),_:1})]})),_:1})):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("div",C,[g,Object(c["createElementVNode"])("div",E,[Object(c["unref"])(t).getters.advancedPermissions(66)?(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:0},Object(c["renderList"])(Object(c["unref"])(l),(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:e.id,onClick:function(t){return o.value.editAttribute(e)},class:"device"},[Object(c["createElementVNode"])("div",_,Object(c["toDisplayString"])(e.description),1),Object(c["createElementVNode"])("div",S,Object(c["toDisplayString"])(e.type),1)],8,B)})),128)):(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:1},Object(c["renderList"])(Object(c["unref"])(l),(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:e.id,class:"device"},[Object(c["createElementVNode"])("div",T,Object(c["toDisplayString"])(e.description),1),Object(c["createElementVNode"])("div",A,Object(c["toDisplayString"])(e.type),1)])})),128))])])],64)}}},U=(n("2a6d"),n("6b0d")),I=n.n(U);const J=I()(L,[["__scopeId","data-v-194e0364"]]);t["default"]=J},"2a6d":function(e,t,n){"use strict";n("9999")},"3b35":function(e,t,n){},"8dbf":function(e,t,n){"use strict";n("3b35")},9999:function(e,t,n){}}]);