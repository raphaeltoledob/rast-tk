(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f6ef695"],{"031c":function(e,t,o){},"21a6":function(e,t,o){(function(o){var r,n,a;(function(o,c){n=[],r=c,a="function"===typeof r?r.apply(t,n):r,void 0===a||(e.exports=a)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,o){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){i(r.response,t,o)},r.onerror=function(){console.error("could not download file")},r.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var c="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof o&&o.global===o?o:void 0,l=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=c.saveAs||("object"!=typeof window||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(e,t,o){var l=c.URL||c.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin===location.origin?a(i):n(i.href)?r(e,t,o):a(i,i.target="_blank")):(i.href=l.createObjectURL(e),setTimeout((function(){l.revokeObjectURL(i.href)}),4e4),setTimeout((function(){a(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,o,c){if(o=o||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,c),o);else if(n(e))r(e,o,c);else{var l=document.createElement("a");l.href=e,l.target="_blank",setTimeout((function(){a(l)}))}}:function(e,t,o,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,o);var a="application/octet-stream"===e.type,i=/constructor/i.test(c.HTMLElement)||c.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||a&&i||l)&&"undefined"!=typeof FileReader){var s=new FileReader;s.onloadend=function(){var e=s.result;e=d?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},s.readAsDataURL(e)}else{var u=c.URL||c.webkitURL,p=u.createObjectURL(e);n?n.location=p:location.href=p,n=null,setTimeout((function(){u.revokeObjectURL(p)}),4e4)}});c.saveAs=i.saveAs=i,e.exports=i}))}).call(this,o("c8ba"))},"2e97":function(e,t,o){"use strict";o("8da7")},"4d0b":function(e,t,o){"use strict";o("b0c0");var r=o("7a23"),n=o("5502"),a=o("1dc4"),c={style:{display:"flex"}},l={style:{flex:"1","margin-right":"10px"}},i={style:{flex:"1"}},d={emits:["change"],setup:function(e,t){var o=t.emit,d=Object(n["b"])(),s=Object(r["ref"])(!1),u=new Date,p=new Date;u.setHours(0),u.setMinutes(0);var b=Object(r["ref"])({date:[u,p],deviceId:[],showMarkers:!0,groupId:[]});Object(r["onMounted"])((function(){o("change",b.value)}));var v=function(){o("change",b.value)},f=Object(r["ref"])([{text:Object(a["a"])("today"),value:function(){var e=new Date,t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),[t,e]}},{text:Object(a["a"])("yesterday"),value:function(){var e=new Date,t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setDate(t.getDate()-1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),[t,e]}},{text:Object(a["a"])("thisweek"),value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}},{text:Object(a["a"])("thismonth"),value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}},{text:Object(a["a"])("theeemonths"),value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-7776e6),[t,e]}}]);return function(e,t){var o=Object(r["resolveComponent"])("el-date-picker"),n=Object(r["resolveComponent"])("el-form-item"),a=Object(r["resolveComponent"])("el-input"),u=Object(r["resolveComponent"])("el-option"),p=Object(r["resolveComponent"])("el-select"),m=Object(r["resolveComponent"])("el-form");return Object(r["openBlock"])(),Object(r["createBlock"])(m,{"label-position":"top"},{default:Object(r["withCtx"])((function(){return[s.value?(Object(r["openBlock"])(),Object(r["createBlock"])(n,{key:1},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(a,{type:"date"})]})),_:1})):(Object(r["openBlock"])(),Object(r["createBlock"])(n,{key:0},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(o,{modelValue:b.value.date,"onUpdate:modelValue":t[0]||(t[0]=function(e){return b.value.date=e}),type:"datetimerange",shortcuts:f.value,"range-separator":e.$t("to"),format:"DD/MM/YYYY HH:mm","start-placeholder":e.$t("startDate"),"end-placeholder":e.$t("endDate"),onChange:v},null,8,["modelValue","shortcuts","range-separator","start-placeholder","end-placeholder"])]})),_:1})),Object(r["createElementVNode"])("div",c,[Object(r["createElementVNode"])("div",l,[Object(r["createVNode"])(n,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,{onChange:v,modelValue:b.value.deviceId,"onUpdate:modelValue":t[1]||(t[1]=function(e){return b.value.deviceId=e}),multiple:"","value-key":"id",filterable:"",placeholder:e.$t("device.devices"),size:"large","no-data-text":e.$t("NO_DATA_TEXT"),"no-match-text":e.$t("NO_MATCH_TEXT")},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object(r["unref"])(d).state.devices.deviceList,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","placeholder","no-data-text","no-match-text"])]})),_:1})]),Object(r["createElementVNode"])("div",i,[Object(r["createVNode"])(n,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,{onChange:v,modelValue:b.value.groupId,"onUpdate:modelValue":t[2]||(t[2]=function(e){return b.value.groupId=e}),multiple:"","value-key":"id",filterable:"",placeholder:e.$t("group.groups"),size:"large","no-data-text":e.$t("NO_DATA_TEXT"),"no-match-text":e.$t("NO_MATCH_TEXT")},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object(r["unref"])(d).state.groups.groupList,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","placeholder","no-data-text","no-match-text"])]})),_:1})])])]})),_:1})}}};o("77ff");const s=d;t["a"]=s},"77ff":function(e,t,o){"use strict";o("031c")},"8cd4":function(e,t,o){"use strict";o.r(t);o("d3b7"),o("159b"),o("b0c0");var r=o("7a23"),n=o("5502"),a=o("4d0b"),c=o("21a6"),l={style:{display:"flex","justify-content":"flex-end"}},i={style:{"margin-top":"20px"}},d={key:0,class:"reportBlock",style:{padding:"10px"}},s={key:1,class:"reportBlock",style:{padding:"10px"}},u=["onClick","set"],p={style:{color:"var(--el-text-color-primary)","font-weight":"bold","font-size":"16px",padding:"10px"}},b={key:0,style:{"border-top":"var(--el-border-color-light) 1px dotted"}},v={style:{"font-size":"10px","padding-top":"3px",color:"var(--el-text-color-secondary)"}},f={style:{"font-size":"12px",color:"var(--el-text-color-regular)","margin-top":"3px","margin-bottom":"5px"}},m={style:{"border-top":"var(--el-border-color-light) 1px dotted",display:"flex","justify-content":"space-between"}},O={style:{flex:"1","text-align":"center","border-right":"var(--el-border-color-light) 1px dotted"}},g={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},j={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},x={style:{flex:"1","text-align":"center","border-right":"var(--el-border-color-light) 1px dotted"}},y={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},h={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},w={style:{flex:"1","text-align":"center"}},k={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},E={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},V={style:{"border-top":"var(--el-border-color-light) 1px dotted",display:"flex","justify-content":"space-between"}},N={style:{flex:"1","text-align":"center","border-right":"var(--el-border-color-light) 1px dotted"}},D={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},S={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},B={style:{flex:"1","text-align":"center","border-right":"var(--el-border-color-light) 1px dotted"}},T={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},C={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},$={style:{"border-top":"var(--el-border-color-light) 1px dotted",display:"flex","justify-content":"space-between"}},A={style:{flex:"1","text-align":"center","border-right":"var(--el-border-color-light) 1px dotted"}},_={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},U={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},L={style:{flex:"1","text-align":"center","border-right":"var(--el-border-color-light) 1px dotted"}},M={style:{"text-transform":"uppercase","margin-top":"10px","font-size":"11px",color:"var(--el-text-color-regular)"}},z={style:{"margin-top":"5px","margin-bottom":"10px","font-size":"20px",color:"var(--el-color-primary)"}},I={setup:function(e){var t=Object(r["ref"])(0),o=Object(n["b"])(),I=Object(r["ref"])({date:[0,0],deviceId:[],showMarkers:!0,groupId:[]}),R=Object(r["ref"])([]),H=function(e){I.value=e},F=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=window.$traccar;t.value=1,o.getReportSummary(I.value.deviceId,I.value.groupId,I.value.date[0].toISOString(),I.value.date[1].toISOString(),e).then((function(o){e?(t.value=0,"application/pdf"===o["headers"]["content-type"]?Object(c["saveAs"])(new Blob([o.data],{type:"application/pdf"}),"resume.pdf"):Object(c["saveAs"])(new Blob([o.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),"resume.xlsx")):(t.value=2,R.value=o.data)}))},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;o.dispatch("devices/setDeviceFilter",e)},Y=Object(r["inject"])("updateRoute"),q=function(e){var o=window.$traccar;o.loadRoute(e.deviceId,e.startTime,e.endTime).then((function(o){var r=o.data,n=[];r.forEach((function(e){n.push([e.latitude,e.longitude,e.id,e.course])})),X(e.deviceId),Y(n),t.value=!1}))};return function(e,n){var c=Object(r["resolveComponent"])("el-button");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createVNode"])(Object(r["unref"])(a["a"]),{onChange:n[0]||(n[0]=function(e){return H(e)})}),Object(r["createElementVNode"])("div",l,[Object(r["createVNode"])(c,{type:"info",onClick:n[1]||(n[1]=function(e){return F(!0)})},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$t("report.export")),1)]})),_:1}),Object(r["createVNode"])(c,{type:"primary",onClick:n[2]||(n[2]=function(e){return F()})},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$t("report.load")),1)]})),_:1})]),Object(r["createElementVNode"])("div",i,[1===t.value?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",d,Object(r["toDisplayString"])(e.$t("LOADING")),1)):Object(r["createCommentVNode"])("",!0),2===t.value&&0===R.value.length?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",s,Object(r["toDisplayString"])(e.$t("NO_DATA_TEXT")),1)):Object(r["createCommentVNode"])("",!0),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(R.value,(function(t,n){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"reportBlock",key:n,onClick:function(e){return q(t)},set:e.device=Object(r["unref"])(o).getters["devices/getDevice"](t.deviceId)},[Object(r["createElementVNode"])("div",p,Object(r["toDisplayString"])(e.device.name),1),t.startTime?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",b,[Object(r["createElementVNode"])("div",v,Object(r["toDisplayString"])(e.$t("startDate")),1),Object(r["createElementVNode"])("div",f,Object(r["toDisplayString"])(new Date(t.startTime).toLocaleDateString()),1)])):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",m,[Object(r["createElementVNode"])("div",O,[Object(r["createElementVNode"])("div",g,Object(r["toDisplayString"])(e.$t("device.distance")),1),Object(r["createElementVNode"])("div",j,Object(r["toDisplayString"])(e.$t("units."+Object(r["unref"])(o).getters["server/getAttribute"]("distanceUnit","distanceUnit"),{distance:t.distance})),1)]),Object(r["createElementVNode"])("div",x,[Object(r["createElementVNode"])("div",y,Object(r["toDisplayString"])(e.$t("device.startOdometer")),1),Object(r["createElementVNode"])("div",h,Object(r["toDisplayString"])(e.$t("units."+Object(r["unref"])(o).getters["server/getAttribute"]("distanceUnit","distanceUnit"),{distance:t.startOdometer})),1)]),Object(r["createElementVNode"])("div",w,[Object(r["createElementVNode"])("div",k,Object(r["toDisplayString"])(e.$t("device.endOdometer")),1),Object(r["createElementVNode"])("div",E,Object(r["toDisplayString"])(e.$t("units."+Object(r["unref"])(o).getters["server/getAttribute"]("distanceUnit","distanceUnit"),{distance:t.endOdometer})),1)])]),Object(r["createElementVNode"])("div",V,[Object(r["createElementVNode"])("div",N,[Object(r["createElementVNode"])("div",D,Object(r["toDisplayString"])(e.$t("device.averageSpeed")),1),Object(r["createElementVNode"])("div",S,Object(r["toDisplayString"])(e.$t("units."+Object(r["unref"])(o).getters["server/getAttribute"]("speedUnit","speedUnit"),{speed:t.averageSpeed})),1)]),Object(r["createElementVNode"])("div",B,[Object(r["createElementVNode"])("div",T,Object(r["toDisplayString"])(e.$t("device.maxSpeed")),1),Object(r["createElementVNode"])("div",C,Object(r["toDisplayString"])(e.$t("units."+Object(r["unref"])(o).getters["server/getAttribute"]("speedUnit","speedUnit"),{speed:t.maxSpeed})),1)])]),Object(r["createElementVNode"])("div",$,[Object(r["createElementVNode"])("div",A,[Object(r["createElementVNode"])("div",_,Object(r["toDisplayString"])(e.$t("device.engineHours")),1),Object(r["createElementVNode"])("div",U,Object(r["toDisplayString"])(Math.round(t.engineHours/60/60/1e3))+" hs",1)]),Object(r["createElementVNode"])("div",L,[Object(r["createElementVNode"])("div",M,Object(r["toDisplayString"])(e.$t("device.spentFuel")),1),Object(r["createElementVNode"])("div",z,Object(r["toDisplayString"])(t.spentFuel)+" L",1)])])],8,u)})),128))])],64)}}},R=(o("2e97"),o("6b0d")),H=o.n(R);const F=H()(I,[["__scopeId","data-v-65ea7f0c"]]);t["default"]=F},"8da7":function(e,t,o){}}]);