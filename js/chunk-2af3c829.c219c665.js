(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2af3c829"],{4577:function(e,t,n){},8053:function(e,t,n){"use strict";n("4577")},9402:function(e,t,n){"use strict";n("d32f")},d32f:function(e,t,n){},fb40:function(e,t,n){"use strict";n.r(t);n("4de4"),n("d3b7"),n("ac1f"),n("466d"),n("a4d3"),n("e01a");var c=n("7a23"),o=n("5502"),a=n("b85c"),l=n("1da1"),r=(n("96cf"),n("e9c4"),n("b0c0"),n("16ee")),i=n("c9a1"),u=n("2295"),d=Object(c["createElementVNode"])("div",{style:{"border-bottom":"#e0e0e0 1px solid",padding:"20px"}},[Object(c["createElementVNode"])("div",{class:"modal-title"},"Cadastrar Comando")],-1),s={style:{"border-top":"#e0e0e0 1px solid",padding:"20px",display:"flex","justify-content":"space-between"}},b=Object(c["createTextVNode"])("Excluir"),m=Object(c["createTextVNode"])("Cancelar"),p=Object(c["createTextVNode"])("Salvar"),f=Object(c["createElementVNode"])("br",null,null,-1),O={setup:function(e,t){var n=t.expose,O={id:0,deviceId:0,description:"",type:"",attributes:{}},j=Object(o["b"])(),v=Object(c["ref"])(null),V=Object(c["ref"])(!1),y=Object(c["ref"])("first"),C=Object(c["ref"])(!1),k=Object(c["ref"])([]),x=Object(c["ref"])([{type:"engineStop"},{type:"engineResume"}]);Object(c["onMounted"])((function(){window.$traccar.getTypeCommands().then((function(e){var t=e.data;k.value=t}))}));var h=Object(c["ref"])(O),N=function(){h.value=JSON.parse(JSON.stringify(O)),V.value=!0},g=function(e){h.value=JSON.parse(JSON.stringify(O)),Object.assign(h.value,JSON.parse(JSON.stringify(e))),V.value=!0};n({newCommand:N,editCommand:g});var w=function(){V.value=!1},B=function(){i["a"].confirm("Deseja realmente excluir este comando?","Tem certeza?").then((function(){j.dispatch("commands/delete",h.value.id).then((function(){V.value=!1,Object(u["a"])({title:"Info",message:"Comando deletado com suceso.",type:"info"})}))}))},E=function(){Object(u["a"])({title:"Info",message:"Cadastrando seu comando...",type:"info"});var e=JSON.parse(JSON.stringify(O));Object.assign(e,h.value),j.dispatch("commands/save",e).then(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var n,c,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=v.value.selected,!(n.length>0)){e.next=21;break}c=Object(a["a"])(n),e.prev=3,c.s();case 5:if((o=c.n()).done){e.next=13;break}return l=o.value,console.log(l),Object(u["a"])({title:"Info",message:"Vinculando comando ao dispositivo "+l.name,type:"info"}),e.next=11,window.$traccar.linkObjects({deviceId:l.id,commandId:t.id});case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](3),c.e(e.t0);case 18:return e.prev=18,c.f(),e.finish(18);case 21:Object(u["a"])({title:"Successo",message:"Comando personalizado cadastrado com sucesso.",type:"success"}),V.value=!1;case 23:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(t){return e.apply(this,arguments)}}())};return function(e,t){var n=Object(c["resolveComponent"])("el-button"),o=Object(c["resolveComponent"])("el-input"),a=Object(c["resolveComponent"])("el-form-item"),l=Object(c["resolveComponent"])("el-option"),i=Object(c["resolveComponent"])("el-select"),u=Object(c["resolveComponent"])("el-switch"),O=Object(c["resolveComponent"])("el-form"),j=Object(c["resolveComponent"])("el-tab-pane"),N=Object(c["resolveComponent"])("el-tabs"),g=Object(c["resolveComponent"])("el-dialog");return Object(c["openBlock"])(),Object(c["createBlock"])(g,{"lock-scroll":!0,modelValue:V.value,"onUpdate:modelValue":t[9]||(t[9]=function(e){return V.value=e}),title:"Teste"},{title:Object(c["withCtx"])((function(){return[d]})),footer:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(n,{type:"danger",onClick:t[0]||(t[0]=function(e){return B()})},{default:Object(c["withCtx"])((function(){return[b]})),_:1})]),Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(n,{type:"danger",plain:"",onClick:t[1]||(t[1]=function(e){return w()})},{default:Object(c["withCtx"])((function(){return[m]})),_:1}),Object(c["createVNode"])(n,{type:"primary",onClick:t[2]||(t[2]=function(e){return E()})},{default:Object(c["withCtx"])((function(){return[p]})),_:1})])])]})),default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(N,{modelValue:y.value,"onUpdate:modelValue":t[8]||(t[8]=function(e){return y.value=e})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(j,{label:"Comando",name:"first"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(O,{"label-width":"120px","label-position":"top"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(a,{label:"Nome do Comando"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(o,{modelValue:h.value.description,"onUpdate:modelValue":t[3]||(t[3]=function(e){return h.value.description=e})},null,8,["modelValue"])]})),_:1}),Object(c["createVNode"])(a,{label:"Tipo de Comando"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(i,{modelValue:h.value.type,"onUpdate:modelValue":t[4]||(t[4]=function(e){return h.value.type=e}),"value-key":"id",filterable:"",placeholder:"Tipo de Comando",size:"large","no-data-text":"Nenhum tipo disponível"},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(k.value,(function(t){return Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:t.type,label:e.$t("actions."+t.type),value:t.type},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),"custom"===h.value.type?(Object(c["openBlock"])(),Object(c["createBlock"])(a,{key:0,label:"Enviar"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(o,{modelValue:h.value.attributes["data"],"onUpdate:modelValue":t[5]||(t[5]=function(e){return h.value.attributes["data"]=e})},null,8,["modelValue"])]})),_:1})):Object(c["createCommentVNode"])("",!0),f,Object(c["createVNode"])(u,{modelValue:C.value,"onUpdate:modelValue":t[6]||(t[6]=function(e){return C.value=e}),"active-text":"Substituir um comando nativo por este comando."},null,8,["modelValue"]),C.value?(Object(c["openBlock"])(),Object(c["createBlock"])(a,{key:1,label:"Qual ação você deseja substituir?"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(i,{modelValue:h.value.attributes["tarkan.changeNative"],"onUpdate:modelValue":t[7]||(t[7]=function(e){return h.value.attributes["tarkan.changeNative"]=e}),"value-key":"id",filterable:"",placeholder:"Grupo",size:"large","no-data-text":"Nenhum tipo disponível"},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(x.value,(function(t){return Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:t.type,label:e.$t("actions."+t.type),value:t.type},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})):Object(c["createCommentVNode"])("",!0)]})),_:1})]})),_:1}),Object(c["createVNode"])(j,{label:"Dispositivos",name:e.devices},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(Object(c["unref"])(r["a"]),{ref_key:"deviceList",ref:v},null,512)]})),_:1},8,["name"])]})),_:1},8,["modelValue"])]})),_:1},8,["modelValue"])}}};n("9402");const j=O;var v=j,V=function(e){return Object(c["pushScopeId"])("data-v-7ebb1e86"),e=e(),Object(c["popScopeId"])(),e},y={style:{display:"flex","justify-content":"space-between","align-content":"space-between"}},C=V((function(){return Object(c["createElementVNode"])("div",{style:{width:"30%"}},null,-1)})),k=V((function(){return Object(c["createElementVNode"])("i",{class:"fas fa-plus"},null,-1)})),x={style:{border:"silver 1px solid","border-radius":"5px","margin-top":"20px",height:"calc(100vh - 200px)"}},h=V((function(){return Object(c["createElementVNode"])("div",{class:"deviceHead"},[Object(c["createElementVNode"])("div",{class:"name",style:{"font-size":"12px","font-weight":"100",padding:"5px",width:"calc(60% + 3.5px)"}},"Titulo"),Object(c["createElementVNode"])("div",{class:"name",style:{"font-size":"12px","font-weight":"100",padding:"5px",flex:"2"}},"Tipo")],-1)})),N={style:{"overflow-x":"hidden","overflow-y":"scroll",height:"calc(100vh - 230px)"}},g=["onClick"],w={class:"name"},B={class:"name",style:{flex:"2"}},E={class:"name"},_={class:"name",style:{flex:"2"}},S={setup:function(e){var t=Object(o["b"])(),n=Object(c["ref"])(""),a=Object(c["ref"])(null),l=Object(c["computed"])((function(){return""===n.value?t.state.commands.commandList:t.state.commands.commandList.filter((function(e){return e.description.toLowerCase().match(n.value.toLowerCase())}))}));return function(e,o){var r=Object(c["resolveComponent"])("el-input"),i=Object(c["resolveComponent"])("el-button"),u=Object(c["resolveComponent"])("el-tooltip");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(Object(c["unref"])(v),{ref_key:"editCommandRef",ref:a},null,512),Object(c["createElementVNode"])("div",y,[C,Object(c["createVNode"])(r,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=function(e){return n.value=e}),placeholder:"Buscar Comando",style:{"--el-input-border-radius":"5px","margin-right":"5px"}},null,8,["modelValue"]),Object(c["unref"])(t).getters.advancedPermissions(57)?(Object(c["openBlock"])(),Object(c["createBlock"])(u,{key:0,effect:"dark",content:"Cadastrar Comando",placement:"bottom"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(i,{type:"primary",onClick:o[1]||(o[1]=function(e){return a.value.newCommand()})},{default:Object(c["withCtx"])((function(){return[k]})),_:1})]})),_:1})):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("div",x,[h,Object(c["createElementVNode"])("div",N,[Object(c["unref"])(t).getters.advancedPermissions(58)?(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:0},Object(c["renderList"])(Object(c["unref"])(l),(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:e.id,onClick:function(t){return a.value.editCommand(e)},class:"device"},[Object(c["createElementVNode"])("div",w,Object(c["toDisplayString"])(e.description),1),Object(c["createElementVNode"])("div",B,Object(c["toDisplayString"])(e.type),1)],8,g)})),128)):(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:1},Object(c["renderList"])(Object(c["unref"])(l),(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:e.id,class:"device"},[Object(c["createElementVNode"])("div",E,Object(c["toDisplayString"])(e.description),1),Object(c["createElementVNode"])("div",_,Object(c["toDisplayString"])(e.type),1)])})),128))])])],64)}}},J=(n("8053"),n("6b0d")),T=n.n(J);const I=T()(S,[["__scopeId","data-v-7ebb1e86"]]);t["default"]=I}}]);