(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60cf117e"],{"031c":function(e,t,n){},"21a6":function(e,t,n){(function(n){var o,a,c;(function(n,r){a=[],o=r,c="function"===typeof o?o.apply(t,a):o,void 0===c||(e.exports=c)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function o(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){i(o.response,t,n)},o.onerror=function(){console.error("could not download file")},o.send()}function a(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function c(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(o){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,l=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(e,t,n){var l=r.URL||r.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin===location.origin?c(i):a(i.href)?o(e,t,n):c(i,i.target="_blank")):(i.href=l.createObjectURL(e),setTimeout((function(){l.revokeObjectURL(i.href)}),4e4),setTimeout((function(){c(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,r){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,r),n);else if(a(e))o(e,n,r);else{var l=document.createElement("a");l.href=e,l.target="_blank",setTimeout((function(){c(l)}))}}:function(e,t,n,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return o(e,t,n);var c="application/octet-stream"===e.type,i=/constructor/i.test(r.HTMLElement)||r.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||c&&i||l)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},d.readAsDataURL(e)}else{var s=r.URL||r.webkitURL,p=s.createObjectURL(e);a?a.location=p:location.href=p,a=null,setTimeout((function(){s.revokeObjectURL(p)}),4e4)}});r.saveAs=i.saveAs=i,e.exports=i}))}).call(this,n("c8ba"))},"4d0b":function(e,t,n){"use strict";n("b0c0");var o=n("7a23"),a=n("5502"),c=n("1dc4"),r={style:{display:"flex"}},l={style:{flex:"1","margin-right":"10px"}},i={style:{flex:"1"}},u={emits:["change"],setup:function(e,t){var n=t.emit,u=Object(a["b"])(),d=Object(o["ref"])(!1),s=new Date,p=new Date;s.setHours(0),s.setMinutes(0);var f=Object(o["ref"])({date:[s,p],deviceId:[],showMarkers:!0,groupId:[]});Object(o["onMounted"])((function(){n("change",f.value)}));var b=function(){n("change",f.value)},v=Object(o["ref"])([{text:Object(c["a"])("today"),value:function(){var e=new Date,t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),[t,e]}},{text:Object(c["a"])("yesterday"),value:function(){var e=new Date,t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setDate(t.getDate()-1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),[t,e]}},{text:Object(c["a"])("thisweek"),value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}},{text:Object(c["a"])("thismonth"),value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}},{text:Object(c["a"])("theeemonths"),value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-7776e6),[t,e]}}]);return function(e,t){var n=Object(o["resolveComponent"])("el-date-picker"),a=Object(o["resolveComponent"])("el-form-item"),c=Object(o["resolveComponent"])("el-input"),s=Object(o["resolveComponent"])("el-option"),p=Object(o["resolveComponent"])("el-select"),O=Object(o["resolveComponent"])("el-form");return Object(o["openBlock"])(),Object(o["createBlock"])(O,{"label-position":"top"},{default:Object(o["withCtx"])((function(){return[d.value?(Object(o["openBlock"])(),Object(o["createBlock"])(a,{key:1},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{type:"date"})]})),_:1})):(Object(o["openBlock"])(),Object(o["createBlock"])(a,{key:0},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(n,{modelValue:f.value.date,"onUpdate:modelValue":t[0]||(t[0]=function(e){return f.value.date=e}),type:"datetimerange",shortcuts:v.value,"range-separator":e.$t("to"),format:"DD/MM/YYYY HH:mm","start-placeholder":e.$t("startDate"),"end-placeholder":e.$t("endDate"),onChange:b},null,8,["modelValue","shortcuts","range-separator","start-placeholder","end-placeholder"])]})),_:1})),Object(o["createElementVNode"])("div",r,[Object(o["createElementVNode"])("div",l,[Object(o["createVNode"])(a,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{onChange:b,modelValue:f.value.deviceId,"onUpdate:modelValue":t[1]||(t[1]=function(e){return f.value.deviceId=e}),multiple:"","value-key":"id",filterable:"",placeholder:e.$t("device.devices"),size:"large","no-data-text":e.$t("NO_DATA_TEXT"),"no-match-text":e.$t("NO_MATCH_TEXT")},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Object(o["unref"])(u).state.devices.deviceList,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","placeholder","no-data-text","no-match-text"])]})),_:1})]),Object(o["createElementVNode"])("div",i,[Object(o["createVNode"])(a,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{onChange:b,modelValue:f.value.groupId,"onUpdate:modelValue":t[2]||(t[2]=function(e){return f.value.groupId=e}),multiple:"","value-key":"id",filterable:"",placeholder:e.$t("group.groups"),size:"large","no-data-text":e.$t("NO_DATA_TEXT"),"no-match-text":e.$t("NO_MATCH_TEXT")},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Object(o["unref"])(u).state.groups.groupList,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","placeholder","no-data-text","no-match-text"])]})),_:1})])])]})),_:1})}}};n("77ff");const d=u;t["a"]=d},7251:function(e,t,n){"use strict";n("78af")},"77ff":function(e,t,n){"use strict";n("031c")},"78af":function(e,t,n){},bf6f:function(e,t,n){"use strict";n.r(t);n("d3b7"),n("159b"),n("caad"),n("2532"),n("b0c0");var o=n("7a23"),a=n("5502"),c=n("4d0b"),r=n("21a6"),l=function(e){return Object(o["pushScopeId"])("data-v-66c55258"),e=e(),Object(o["popScopeId"])(),e},i={style:{display:"flex","justify-content":"flex-end"}},u={style:{"margin-right":"10px","margin-top":"10px"}},d=Object(o["createTextVNode"])("Baixar"),s=Object(o["createTextVNode"])("Buscar"),p={style:{"margin-top":"20px"}},f={key:0,class:"reportBlock",style:{padding:"10px"}},b={key:1,class:"reportBlock",style:{padding:"10px"}},v=["onClick","set"],O={style:{color:"var(--el-text-color-primary)","font-weight":"bold","font-size":"16px",padding:"10px"}},j={style:{"text-align":"right",padding:"10px","font-size":"11px",color:"#5b5b5b",position:"relative",width:"70px"}},m=l((function(){return Object(o["createElementVNode"])("div",{style:{position:"absolute",width:"20px",height:"20px","font-size":"16px","text-align":"center",right:"-10px",top:"50%","border-radius":"50%",transform:"translateY(-50%)"}},[Object(o["createElementVNode"])("i",{class:"fas fa-exclamation-triangle"})],-1)})),g={style:{position:"absolute",right:"15px",top:"50%","border-radius":"50%",transform:"translateY(-50%)"}},h=l((function(){return Object(o["createElementVNode"])("br",null,null,-1)})),w={style:{padding:"10px","font-size":"14px",flex:"1"}},x={setup:function(e){var t=Object(o["ref"])(0),n=Object(a["b"])(),l=Object(o["inject"])("updateRoute"),x=Object(o["inject"])("showRouteMarkers"),y=Object(o["ref"])({date:[0,0],deviceId:[],showMarkers:!0,groupId:[]}),k=Object(o["ref"])([]),E=Object(o["computed"])((function(){var e={};return k.value.forEach((function(t){e[t.deviceId]||(e[t.deviceId]=[]),e[t.deviceId].push(t)})),e})),B=window.$traccar,V=function(e){y.value=e},T=function(e){B.loadRoute(e.deviceId,e.startTime,e.endTime).then((function(e){var n=e.data,o=[];n.forEach((function(e){o.push([e.latitude,e.longitude,e.id,e.course])})),l(o),t.value=!1}))};Object(o["onBeforeUnmount"])((function(){}));var D=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.value=1,B.getReportEvents(y.value.deviceId,y.value.groupId,y.value.date[0].toISOString(),y.value.date[1].toISOString(),e).then((function(n){if(e)t.value=0,"application/pdf"===n["headers"]["content-type"]?Object(r["saveAs"])(new Blob([n.data],{type:"application/pdf"}),"resume.pdf"):Object(r["saveAs"])(new Blob([n.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),"resume.xlsx");else{t.value=2,k.value=n.data;var o=[];n.data.forEach((function(e){e.positionId&&!o.includes(e.positionId)&&o.push(e.positionId)})),B.getPositions(o).then((function(e){o=[],e.forEach((function(e){o.push([e.latitude,e.longitude,e.id,e.course])})),l(o,!1)}))}}))};return function(e,a){var r=Object(o["resolveComponent"])("el-switch"),l=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(Object(o["unref"])(c["a"]),{onChange:a[0]||(a[0]=function(e){return V(e)})}),Object(o["createElementVNode"])("div",i,[Object(o["createElementVNode"])("div",u,[Object(o["createVNode"])(r,{modelValue:Object(o["unref"])(x),"onUpdate:modelValue":a[1]||(a[1]=function(e){return Object(o["isRef"])(x)?x.value=e:null}),"active-text":"Mostrar Marcadores"},null,8,["modelValue"])]),Object(o["createVNode"])(l,{onClick:a[2]||(a[2]=function(e){return D(!0)})},{default:Object(o["withCtx"])((function(){return[d]})),_:1}),Object(o["createVNode"])(l,{type:"primary",onClick:a[3]||(a[3]=function(e){return D()})},{default:Object(o["withCtx"])((function(){return[s]})),_:1})]),Object(o["createElementVNode"])("div",p,[1===t.value?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",f,"CARREGANDO DADOS...")):Object(o["createCommentVNode"])("",!0),2===t.value&&0===k.value.length?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",b,"--NÃO HÁ DADOS PARA MOSTRAR--")):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Object(o["unref"])(E),(function(t,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"reportBlock",key:a,onClick:function(e){return T(t)},set:e.device=Object(o["unref"])(n).getters["devices/getDevice"](parseInt(a))},[Object(o["createElementVNode"])("div",O,Object(o["toDisplayString"])(e.device.name),1),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(t,(function(t,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:"evt-"+a+"-"+n,style:{"border-top":"var(--el-border-color-light) 1px dotted",display:"flex","justify-content":"space-between"}},[Object(o["createElementVNode"])("div",j,[m,Object(o["createElementVNode"])("div",g,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(new Date(t.eventTime).toLocaleDateString()),1),h,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(new Date(t.eventTime).toLocaleTimeString()),1)])]),Object(o["createElementVNode"])("div",w,Object(o["toDisplayString"])(e.KT("notification.types."+t.type)),1)])})),128))],8,v)})),128))])],64)}}},y=(n("7251"),n("6b0d")),k=n.n(y);const E=k()(x,[["__scopeId","data-v-66c55258"]]);t["default"]=E}}]);